{
  "name": "DuraGraph Development",
  "dockerComposeFile": "docker-compose.yml",
  "service": "duragraph-devcontainer",
  "workspaceFolder": "/workspace",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "version": "latest",
      "moby": true
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "golang.go",
        "ms-python.python",
        "task.vscode-task",
        "anthropic.claude-code",
        "ms-python.vscode-pylance",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss",
        "svelte.svelte-vscode",
        "ms-azuretools.vscode-docker",
        "redhat.vscode-yaml",
        "github.copilot",
        "github.copilot-chat",
        "usernamehw.errorlens",
        "gruntfuggly.todo-tree",
        "streetsidesoftware.code-spell-checker",
        "sanjulaganepola.github-local-actions",
        "github.vscode-github-actions"
      ],
      "settings": {
        "go.useLanguageServer": true,
        "go.lintTool": "golangci-lint",
        "go.lintOnSave": "package",
        "go.formatTool": "goimports",
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "terminal.integrated.profiles.linux": {
          "bash": {
            "path": "bash",
            "icon": "terminal-bash"
          },
          "zsh": {
            "path": "zsh"
          }
        },
        "[go]": {
          "editor.defaultFormatter": "golang.go"
        },
        "[python]": {
          "editor.defaultFormatter": "ms-python.python"
        },
        "python.defaultInterpreterPath": "/home/vscode/.local/share/uv/python",
        "files.trimTrailingWhitespace": true,
        "files.insertFinalNewline": true,
        "terminal.integrated.defaultProfile.linux": "zsh"
      }
    }
  },
  "mounts": [
    "source=${localEnv:HOME}/.claude,target=/home/vscode/.claude,type=bind,consistency=cached"
  ],
  "forwardPorts": [
    8080,
    8081,
    5173,
    3000,
    5432,
    4222,
    8222
  ],
  "portsAttributes": {
    "8080": {
      "label": "API Server",
      "onAutoForward": "notify"
    },
    "8081": {
      "label": "API Server (alt)",
      "onAutoForward": "notify"
    },
    "5173": {
      "label": "Dashboard",
      "onAutoForward": "notify"
    },
    "3000": {
      "label": "Docs/Website",
      "onAutoForward": "notify"
    },
    "5432": {
      "label": "PostgreSQL",
      "onAutoForward": "silent"
    },
    "4222": {
      "label": "NATS",
      "onAutoForward": "silent"
    },
    "8222": {
      "label": "NATS Monitor",
      "onAutoForward": "silent"
    }
  },
  "initializeCommand": "docker network inspect duragraph-network >/dev/null 2>&1 || docker network create duragraph-network",
  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "remoteUser": "vscode",
  "containerEnv": {
    "DOCKER_BUILDKIT": "1",
    "COMPOSE_DOCKER_CLI_BUILD": "1",
    "GIT_USER_NAME": "${localEnv:GIT_USER_NAME}",
    "GIT_USER_EMAIL": "${localEnv:GIT_USER_EMAIL}",
    "GPG_PRIVATE_KEY": "${localEnv:GPG_PRIVATE_KEY}",
    "GPG_KEY_ID": "${localEnv:GPG_KEY_ID}",
    "ENABLE_GPG_SIGNING": "${localEnv:ENABLE_GPG_SIGNING}"
  }
}
