---
title: Migrating from LangGraph Cloud
description: Complete guide for migrating from LangGraph Cloud to DuraGraph
---

This guide helps you migrate your existing LangGraph Cloud workflows to DuraGraph with minimal code changes.

## Why Migrate?

| Benefit | Description |
|---------|-------------|
| **Open Source** | Self-host and customize DuraGraph to your needs |
| **Cost Control** | No per-execution pricing, pay only for infrastructure |
| **Data Sovereignty** | Keep your data in your own infrastructure |
| **LangGraph Compatible** | Drop-in API compatibility with LangGraph Cloud |
| **Enterprise Ready** | Production-ready with PostgreSQL and NATS JetStream |

## Feature Comparison

| Feature | LangGraph Cloud | DuraGraph | Status |
|---------|----------------|-----------|--------|
| Assistants API | âœ… | âœ… | Full parity |
| Threads API | âœ… | âœ… | Full parity |
| Runs API | âœ… | âœ… | Full parity |
| SSE Streaming | âœ… | âœ… | Full parity |
| Thread State | âœ… | âœ… | Full parity |
| Checkpoints | âœ… | âœ… | Full parity |
| Human-in-the-Loop | âœ… | âœ… | Full parity |
| Search/Count | âœ… | âœ… | Full parity |
| Webhooks | âœ… | ğŸš§ | Coming Q1 |
| Crons | âœ… | ğŸš§ | Coming Q2 |
| Store API | âœ… | ğŸš§ | Coming Q2 |
| LangGraph Studio | âœ… | âŒ | Use DuraGraph Dashboard |

## Complete Endpoint Mapping

### System Endpoints

| LangGraph Cloud | DuraGraph | Method | Status |
|-----------------|-----------|--------|--------|
| `/ok` | `/ok` | GET | âœ… |
| `/info` | `/info` | GET | âœ… |
| `/health` | `/health` | GET | âœ… |
| `/metrics` | `/metrics` | GET | âœ… |

### Assistant Endpoints

| LangGraph Cloud | DuraGraph | Method | Status |
|-----------------|-----------|--------|--------|
| `/assistants` | `/api/v1/assistants` | POST | âœ… |
| `/assistants` | `/api/v1/assistants` | GET | âœ… |
| `/assistants/{id}` | `/api/v1/assistants/{id}` | GET | âœ… |
| `/assistants/{id}` | `/api/v1/assistants/{id}` | PATCH | âœ… |
| `/assistants/{id}` | `/api/v1/assistants/{id}` | DELETE | âœ… |
| `/assistants/search` | `/api/v1/assistants/search` | POST | âœ… |
| `/assistants/count` | `/api/v1/assistants/count` | POST | âœ… |
| `/assistants/{id}/versions` | `/api/v1/assistants/{id}/versions` | GET | âœ… |
| `/assistants/{id}/schemas` | `/api/v1/assistants/{id}/schemas` | GET | âœ… |

### Thread Endpoints

| LangGraph Cloud | DuraGraph | Method | Status |
|-----------------|-----------|--------|--------|
| `/threads` | `/api/v1/threads` | POST | âœ… |
| `/threads` | `/api/v1/threads` | GET | âœ… |
| `/threads/{id}` | `/api/v1/threads/{id}` | GET | âœ… |
| `/threads/{id}` | `/api/v1/threads/{id}` | PATCH | âœ… |
| `/threads/{id}` | `/api/v1/threads/{id}` | DELETE | âœ… |
| `/threads/search` | `/api/v1/threads/search` | POST | âœ… |
| `/threads/count` | `/api/v1/threads/count` | POST | âœ… |
| `/threads/{id}/messages` | `/api/v1/threads/{id}/messages` | POST | âœ… |
| `/threads/{id}/state` | `/api/v1/threads/{id}/state` | GET | âœ… |
| `/threads/{id}/state` | `/api/v1/threads/{id}/state` | POST | âœ… |
| `/threads/{id}/history` | `/api/v1/threads/{id}/history` | GET | âœ… |
| `/threads/{id}/copy` | `/api/v1/threads/{id}/copy` | POST | âœ… |

### Run Endpoints

| LangGraph Cloud | DuraGraph | Method | Status |
|-----------------|-----------|--------|--------|
| `/threads/{id}/runs` | `/api/v1/threads/{id}/runs` | POST | âœ… |
| `/threads/{id}/runs` | `/api/v1/threads/{id}/runs` | GET | âœ… |
| `/threads/{id}/runs/{run_id}` | `/api/v1/threads/{id}/runs/{run_id}` | GET | âœ… |
| `/threads/{id}/runs/{run_id}` | `/api/v1/threads/{id}/runs/{run_id}` | DELETE | âœ… |
| `/threads/{id}/runs/{run_id}/cancel` | `/api/v1/threads/{id}/runs/{run_id}/cancel` | POST | âœ… |
| `/threads/{id}/runs/{run_id}/resume` | `/api/v1/threads/{id}/runs/{run_id}/resume` | POST | âœ… |
| `/threads/{id}/runs/{run_id}/join` | `/api/v1/threads/{id}/runs/{run_id}/join` | GET | âœ… |
| `/threads/{id}/runs/stream` | `/api/v1/threads/{id}/runs/stream` | POST | âœ… |
| `/runs` | `/api/v1/runs` | POST | âœ… |
| `/runs/wait` | `/api/v1/runs/wait` | POST | âœ… |
| `/runs/stream` | `/api/v1/runs/stream` | POST | âœ… |
| `/runs/batch` | `/api/v1/runs/batch` | POST | âœ… |

## Step-by-Step Migration

### 1. Update Base URL

The only required change is updating the base URL:

```python
# Before (LangGraph Cloud)
from langgraph_sdk import get_client
client = get_client(url="https://api.smith.langchain.com")

# After (DuraGraph)
from langgraph_sdk import get_client
client = get_client(url="http://localhost:8081")  # Or your DuraGraph instance
```

### 2. Authentication Changes

```python
# Before (LangGraph Cloud)
client = get_client(
    url="https://api.smith.langchain.com",
    api_key="lsv2_..."
)

# After (DuraGraph) - JWT or API Key
client = get_client(
    url="http://your-duragraph.com",
    api_key="your-duragraph-token"
)
```

## SDK Examples

### Python

```python
import asyncio
from langgraph_sdk import get_client

async def main():
    # Connect to DuraGraph (same SDK as LangGraph Cloud)
    client = get_client(url="http://localhost:8081")

    # Create an assistant
    assistant = await client.assistants.create(
        graph_id="chatbot",
        name="My Chatbot",
        config={"model": "gpt-4"}
    )
    print(f"Created assistant: {assistant['assistant_id']}")

    # Create a thread
    thread = await client.threads.create()
    print(f"Created thread: {thread['thread_id']}")

    # Start a run
    run = await client.runs.create(
        thread_id=thread["thread_id"],
        assistant_id=assistant["assistant_id"],
        input={"messages": [{"role": "user", "content": "Hello!"}]}
    )

    # Stream events
    async for event in client.runs.stream(
        thread_id=thread["thread_id"],
        run_id=run["run_id"]
    ):
        print(f"Event: {event}")

asyncio.run(main())
```

### TypeScript

```typescript
import { Client } from "@langchain/langgraph-sdk";

async function main() {
  // Connect to DuraGraph
  const client = new Client({
    apiUrl: "http://localhost:8081",
  });

  // Create an assistant
  const assistant = await client.assistants.create({
    graphId: "chatbot",
    name: "My Chatbot",
    config: { model: "gpt-4" },
  });
  console.log(`Created assistant: ${assistant.assistant_id}`);

  // Create a thread
  const thread = await client.threads.create();
  console.log(`Created thread: ${thread.thread_id}`);

  // Start a run with streaming
  const stream = client.runs.stream(thread.thread_id, assistant.assistant_id, {
    input: { messages: [{ role: "user", content: "Hello!" }] },
  });

  for await (const event of stream) {
    console.log("Event:", event);
  }
}

main();
```

### Go

```go
package main

import (
    "context"
    "fmt"
    "net/http"
    "bytes"
    "encoding/json"
    "io"
)

const baseURL = "http://localhost:8081/api/v1"

func main() {
    ctx := context.Background()

    // Create an assistant
    assistantPayload := map[string]interface{}{
        "name":  "My Chatbot",
        "model": "gpt-4",
    }
    assistant, _ := post(ctx, "/assistants", assistantPayload)
    fmt.Printf("Created assistant: %s\n", assistant["assistant_id"])

    // Create a thread
    thread, _ := post(ctx, "/threads", map[string]interface{}{})
    fmt.Printf("Created thread: %s\n", thread["thread_id"])

    // Start a run
    runPayload := map[string]interface{}{
        "assistant_id": assistant["assistant_id"],
        "input": map[string]interface{}{
            "messages": []map[string]string{
                {"role": "user", "content": "Hello!"},
            },
        },
    }
    threadID := thread["thread_id"].(string)
    run, _ := post(ctx, fmt.Sprintf("/threads/%s/runs", threadID), runPayload)
    fmt.Printf("Created run: %s\n", run["run_id"])
}

func post(ctx context.Context, path string, payload map[string]interface{}) (map[string]interface{}, error) {
    body, _ := json.Marshal(payload)
    req, _ := http.NewRequestWithContext(ctx, "POST", baseURL+path, bytes.NewReader(body))
    req.Header.Set("Content-Type", "application/json")

    resp, err := http.DefaultClient.Do(req)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()

    data, _ := io.ReadAll(resp.Body)
    var result map[string]interface{}
    json.Unmarshal(data, &result)
    return result, nil
}
```

## Human-in-the-Loop Migration

DuraGraph fully supports LangGraph's Command pattern for human-in-the-loop workflows:

```python
# Resume a run that's waiting for human input
await client.runs.resume(
    thread_id=thread_id,
    run_id=run_id,
    command={
        "resume": "approved",  # Or any value to pass to the graph
        "update": {"key": "value"},  # Optional state updates
    }
)
```

### Interrupt Patterns

```python
# Create run with interrupt points
run = await client.runs.create(
    thread_id=thread_id,
    assistant_id=assistant_id,
    input={"message": "Process this"},
    interrupt_before=["approval_node"],  # Pause before this node
    interrupt_after=["review_node"],     # Pause after this node
)
```

## Configuration Differences

| Setting | LangGraph Cloud | DuraGraph |
|---------|-----------------|-----------|
| Base URL | `https://api.smith.langchain.com` | `http://your-instance:8081` |
| API Prefix | `/` | `/api/v1/` |
| Auth Header | `X-API-Key` or `Authorization` | `Authorization: Bearer <token>` |
| Streaming | SSE | SSE (compatible) |
| Checkpoints | Managed | PostgreSQL-backed |

## Testing Your Migration

### 1. Run Conformance Tests

```bash
# Clone DuraGraph
git clone https://github.com/duragraph/duragraph.git
cd duragraph

# Start DuraGraph
docker compose up -d

# Run conformance tests against your instance
API_BASE_URL=http://localhost:8081/api/v1 pytest tests/conformance/
```

### 2. Parallel Testing

Run both systems in parallel during migration:

```python
import os

# Feature flag for gradual migration
USE_DURAGRAPH = os.getenv("USE_DURAGRAPH", "false").lower() == "true"

if USE_DURAGRAPH:
    client = get_client(url="http://your-duragraph.com")
else:
    client = get_client(url="https://api.smith.langchain.com")
```

## Troubleshooting

### Common Issues

**Connection refused:**
```bash
# Check if DuraGraph is running
curl http://localhost:8081/health

# Check container status
docker compose ps
```

**Authentication errors:**
```bash
# Verify your token
curl -H "Authorization: Bearer YOUR_TOKEN" http://localhost:8081/api/v1/assistants
```

**Run stuck in queued:**
```bash
# Check server logs
docker compose logs server

# Verify NATS connection
docker compose logs nats
```

**Streaming not working:**
```bash
# Test SSE endpoint directly
curl -N http://localhost:8081/api/v1/stream?run_id=YOUR_RUN_ID
```

### Performance Comparison

Monitor latency during migration:

```python
import time

async def benchmark():
    start = time.time()
    run = await client.runs.create(...)
    await client.runs.join(thread_id, run["run_id"])
    latency = time.time() - start
    print(f"End-to-end latency: {latency:.2f}s")
```

## Next Steps

1. âœ… Start DuraGraph locally: `docker compose up -d`
2. âœ… Update your SDK base URL
3. âœ… Run your existing tests
4. âœ… Compare performance metrics
5. âœ… [Deploy to production](../installation/self-hosted.mdx)
6. âœ… [Set up monitoring](../concepts/observability.mdx)

## Getting Help

- **GitHub Issues**: [github.com/duragraph/duragraph/issues](https://github.com/duragraph/duragraph/issues)
- **Discussions**: [github.com/duragraph/duragraph/discussions](https://github.com/duragraph/duragraph/discussions)
- **Documentation**: [docs.duragraph.ai](https://docs.duragraph.ai)
